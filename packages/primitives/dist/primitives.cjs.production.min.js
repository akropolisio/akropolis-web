"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,n=(t=require("bn.js"))&&"object"==typeof t&&"default"in t?t.default:t,e=/^0x[a-fA-F0-9]+$/;function r(t,n,r){void 0===n&&(n=-1),void 0===r&&(r=!1);var o="0x"===t||("string"==typeof t||t instanceof String)&&e.test(t.toString());return o&&-1!==n?t.length===2+Math.ceil(n/4):o&&(r||t.length%2==0)}function o(){return(o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function i(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var a=/^[a-fA-F0-9]+$/;function u(t){if(!t)return"";if(t&&r(t,-1,!0)&&"0x"===t.substr(0,2))return t.substr(2);if(a.test(t))return t;throw new Error("Invalid hex "+t+" passed to hexStripPrefix")}function s(t,e){if(void 0===e&&(e={isLe:!1,isNegative:!1}),!t)return new n(0);var r=o({isLe:!1,isNegative:!1},"boolean"==typeof e?{isLe:e}:e),i=u(t),a=new n((r.isLe?function(t){return(t.match(new RegExp(".{1,2}","g"))||[]).reverse().join("")}(i):i)||"00",16);return r.isNegative?a.fromTwos(4*i.length):a}function c(t){return"object"==typeof t&&!!t&&"toBN"in t}function l(t){if(!t)return new n(0);if(r(t,void 0,!0))return s(t.toString());var e=c(t)?t.toBN():new n(t);return n.isBN(t)?t:e}function m(t){return new n(10).pow(new n(t))}var d=new n(0),f=new n(-1);function h(t,n){var e=t.decimals,r=n||function(t){switch(t.toUpperCase()){case"BTC":case"RENBTC":case"WBTC":case"SBTC":case"YFI":return 7;default:return 5}}(t.symbol);return m(Math.max(0,e-r))}function v(t,n){return t.toLowerCase()===n.toLowerCase()}var p=new n(-1);function b(t,n,e){if(0===t.length||"0"===t)return{fractional:"",integer:"0"};var r=t[0].startsWith("-"),o=r?t.substr(1):t,i=o.length-n,a=o.substr(0,i),u=n-e>o.length-1?n-o.length+1:e,s=n<u?n:u;return{fractional:((""+"0".repeat(i<0?0-i:0)+o).substr(i<0?0:i)+"000").substr(0,s),integer:(r?"-":"")+(a||"0")}}var y=new RegExp("(\\d+?)(?=(\\d{3})+(?!\\d)|$)","g");function w(t){if(0===t.length)return"0";var n=t[0].startsWith("-"),e=n?t.substr(1).match(y):t.match(y);return e?(n?"-":"")+e.join(","):t}var g=["start-space","start"];function x(t){var n,e=t.rawInteger,r=t.rawFractional,o=void 0===r?"":r,i=t.symbolPosition,a=t.tokenSymbol,u=t.variant,s=t.si,c=g.includes(i),l=null===(n=e[0])||void 0===n?void 0:n.startsWith("-"),m=c?a:"",d="start-space"===i?" ":"",f=l?"-":"",h=w(l?e.substr(1):e)||"0",v={default:function(){return o},"trim-fractional-zeros":function(){return o.replace(/^(\d*?)0*$/,"$1")}}[u](),p=v?".":"",b=(null==s?void 0:s.value)||"",y="end-space"===i?" ":"",x=c?"":a;return{formatted:[m,d,f,h,p,v,b,y,x].join("").trim(),detailed:{startSymbol:m,startSpace:d,negativeSign:f,integer:h,decimalSeparator:p,fractional:v,siPower:b,endSpace:y,endSymbol:x}}}function S(t){var n=t.baseDecimals,e=t.tokenSymbol,r=void 0===e?"":e,o=t.precision,i=void 0===o?2:o,a=t.variant,u=void 0===a?"default":a,s=t.symbolPosition,c=void 0===s?"end-space":s,m=t.withSI,d=void 0!==m&&m,f=l(t.amountInBaseUnits).toString();if(0===f.length||"0"===f)return x({rawInteger:"0",rawFractional:"",variant:u,symbolPosition:c,tokenSymbol:r});var h,v=b(f,n,i),p=v.integer,y=d?(h=p.length)>9?A.billion:h>6?A.million:h>3?A.thousand:null:null;if(!y)return x({rawInteger:p,rawFractional:v.fractional,variant:u,symbolPosition:c,tokenSymbol:r});var w=b(f,n+y.power,i);return x({rawInteger:w.integer,rawFractional:w.fractional,variant:u,symbolPosition:c,tokenSymbol:r,si:y})}var A={thousand:{power:3,value:"K"},million:{power:6,value:"M"},billion:{power:9,value:"B"}},B=function(){function t(t,e){void 0===e&&(e=new n(1));var r=this.round(l(t),l(e)),o=r[1];this.numerator=r[0],this.denominator=o}t.isFraction=function(n){return n instanceof t};var e=t.prototype;return e.toBN=function(){return this.numerator.div(this.denominator)},e.toDecimal=function(t,e){var r=new n(10).pow(new n(e));return b(this.numerator.mul(r).div(this.denominator).toString(),t+e,e)},e.add=function(n){var e=F(n),r=e.denominator,o=e.numerator;return new t(this.numerator.mul(r).add(o.mul(this.denominator)),this.denominator.mul(r))},e.sub=function(n){var e=F(n),r=e.denominator,o=e.numerator;return new t(this.numerator.mul(r).sub(o.mul(this.denominator)),this.denominator.mul(r))},e.div=function(n){var e=F(n),r=e.numerator;return new t(this.numerator.mul(e.denominator),this.denominator.mul(r))},e.mul=function(n){var e=F(n),r=e.denominator;return new t(this.numerator.mul(e.numerator),this.denominator.mul(r))},e.eq=function(t){return this.toBN().eq(F(t).toBN())},e.gt=function(t){var n=F(t),e=n.numerator;return this.numerator.mul(n.denominator).gt(e.mul(this.denominator))},e.lt=function(t){var n=F(t),e=n.numerator;return this.numerator.mul(n.denominator).lt(e.mul(this.denominator))},e.lte=function(t){var n=F(t),e=n.numerator;return this.numerator.mul(n.denominator).lte(e.mul(this.denominator))},e.gte=function(t){var n=F(t),e=n.numerator;return this.numerator.mul(n.denominator).gte(e.mul(this.denominator))},e.abs=function(){return new t(this.numerator.abs(),this.denominator.abs())},e.pow=function(n){var e=l(n);return new t(this.numerator.pow(e),this.denominator.pow(e))},e.isZero=function(){return this.numerator.isZero()},e.isNeg=function(){return this.numerator.isNeg()},e.toNumber=function(){return parseFloat(this.toString())},e.toString=function(){var e=new n(10).pow(new n(t.decimalsAccuracy)),r=this.numerator.div(this.denominator);return r+"."+this.numerator.sub(this.denominator.mul(r)).add(this.denominator).mul(e).div(this.denominator).toString().slice(1)},e.valueOf=function(){return this.toNumber()},e.round=function(n,e){return n.length<=t.maxWordsInNumerator?[n,e]:[n.mul(m(t.decimalsAccuracy)).div(e),m(t.decimalsAccuracy)]},t}();function F(t){if(t instanceof B)return t;if("object"==typeof t&&"toFraction"in t)return t.toFraction();if("number"==typeof t){var e=Math.floor(t),r=t-e;return r?new B(r.toFixed(18).replace(/0\.(\d+)/,"1$1"),m(18)).sub(new n(1)).add(new n(e)):new B(new n(e))}return new B(t)}B.decimalsAccuracy=18,B.maxWordsInNumerator=96;var k=Symbol("Currency"),N=function(){function t(t,n){this.symbol=t,this.decimals=n,this._type=k}var n=t.prototype;return n.toJSON=function(){return{_type:"Currency",symbol:this.symbol,decimals:this.decimals}},n.equals=function(t){return this.symbol===t.symbol&&this.decimals===t.decimals},t}(),P=Symbol("Token"),T=function(){function t(t,n,e,r){this.address=t,this.symbol=n,this.decimals=e,this.network=r,this._type=P}var n=t.prototype;return n.toJSON=function(){return{_type:"Token",address:this.address,symbol:this.symbol,decimals:this.decimals,network:this.network}},n.equals=function(t){return v(this.address,t.address)},t}(),D=function(){function t(t,n){this.currency=n,this.value=F(t)}var n=t.prototype;return n.toFormattedString=function(t,n){return this.toFormattedBalance(t,n).formatted},n.toShortString=function(t,n){return this.toFormattedBalance(t,n,!0).formatted},n.withValue=function(t){return this.makeAmount(F(t),this.currency)},n.sub=function(t){return this.makeAmount(this.value.sub(F(t)),this.currency)},n.add=function(t){return this.makeAmount(this.value.add(F(t)),this.currency)},n.div=function(t){return this.makeAmount(this.value.div(F(t)),this.currency)},n.mul=function(t){return this.makeAmount(this.value.mul(F(t)),this.currency)},n.isZero=function(){return this.value.isZero()},n.isNeg=function(){return this.value.isNeg()},n.eq=function(t){return this.eqValues(t)&&this.currency.equals(t.currency)},n.eqValues=function(t){return this.value.eq(F(t))},n.gt=function(t){return this.value.gt(F(t))},n.lt=function(t){return this.value.lt(F(t))},n.gte=function(t){return this.value.gte(F(t))},n.lte=function(t){return this.value.lte(F(t))},n.abs=function(){return this.value.abs()},n.pow=function(t){return this.value.pow(t)},n.toBN=function(){return this.value.toBN()},n.toFraction=function(){return this.value},n.toDecimal=function(t){return this.value.toDecimal(this.currency.decimals,t)},n.toNumber=function(){return this.value.toNumber()},n.toString=function(t,n){return this.toBN().toString(t,n)},n.valueOf=function(){return this.value.valueOf()},n.toSignificantValue=function(t){var n=h(this.currency,t);return this.gte(n)?this:this.makeAmount(0,this.currency)},t}(),C=Symbol("TokenAmount"),I=function(t){function n(){var n;return(n=t.apply(this,arguments)||this)._type=C,n}i(n,t);var e=n.prototype;return e.makeAmount=function(t,e){return new n(t,e)},e.toFormattedBalance=function(t,n,e){return void 0===t&&(t=2),void 0===n&&(n=!0),S({withSI:e,amountInBaseUnits:this.toBN(),tokenSymbol:n?this.currency.symbol:void 0,baseDecimals:this.currency.decimals,precision:t,symbolPosition:"end-space"})},e.withToken=function(t){return new n(this.toFraction(),t)},n}(D),q=Symbol("PercentAmount"),E=function(t){function e(n){var e;return(e=t.call(this,n,new N("%",0))||this)._type=q,e}i(e,t);var r=e.prototype;return r.makeAmount=function(t){return new e(t)},r.toFormattedBalance=function(t,e,r){void 0===t&&(t=2),void 0===e&&(e=!0);var o=new n(10).pow(new n(t));return S({withSI:r,amountInBaseUnits:this.toFraction().mul(o).toBN(),tokenSymbol:e?this.currency.symbol:void 0,baseDecimals:t,precision:t,symbolPosition:"end"})},e}(D),O=Symbol("LiquidityAmount type"),U=function(t){function n(n,e,r){var o,i,a;return(a=t.call(this,n,e)||this).options=r,a._type=O,a.defaultPrecision=(null===(o=a.options)||void 0===o?void 0:o.precisions)||2,a.defaultSymbolPosition=(null===(i=a.options)||void 0===i?void 0:i.symbolPosition)||"start",a}i(n,t);var e=n.prototype;return e.makeAmount=function(t,e){return new n(t,e,this.options)},e.toFormattedBalance=function(t,n,e){return void 0===t&&(t=this.defaultPrecision),void 0===n&&(n=!0),S({withSI:e,amountInBaseUnits:this.toBN(),tokenSymbol:n?this.currency.symbol:void 0,baseDecimals:this.currency.decimals,precision:t,symbolPosition:this.defaultSymbolPosition})},n}(D),_="0x0000000000000000000000000000000000000000";exports.AllCoinsToken=function(t){function n(n,e){var r;return void 0===e&&(e="All Coins"),(r=t.call(this,_,e,18,"eth")||this).tokens=n,r}return i(n,t),n}(T),exports.Amount=D,exports.Currency=N,exports.Fraction=B,exports.LiquidityAmount=U,exports.PercentAmount=E,exports.Token=T,exports.TokenAmount=I,exports.bnToBn=l,exports.calcAvg=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(n.length<=1)return F(n.length&&n[0].value||0);var r=n.reduce((function(t,n){var e=F(t.weight||1),r=F(n.weight||1),o=F(t.value),i=F(n.value),a=e.add(r);return a.isZero()?{value:0,weight:0}:{value:o.mul(e).add(i.mul(r)).div(a),weight:a}}));return F(r.value)},exports.decimalsToWei=m,exports.denormolizeAmount=function(t,n){var e=t.toFraction();return new I(t.currency.decimals>n.decimals?e.div(m(t.currency.decimals-n.decimals)):e.mul(m(n.decimals-t.currency.decimals)),n)},exports.formatBalance=S,exports.formatInteger=w,exports.fromBaseUnit=function(t,e){var r=new n(t),o=r.lt(d),i=new n(10).pow(new n(e));o&&(r=r.mul(f));for(var a=r.mod(i).toString(10);a.length<e;)a="0"+a;a=a.replace(/^(.+?)0+$/,"$1");var u=r.div(i).toString(10)+("0"===a?"":"."+a);return o&&(u="-"+u),u},exports.getDecimal=b,exports.getSignificantValue=h,exports.hexStripPrefix=u,exports.hexToBn=s,exports.isEqualHex=v,exports.isHex=r,exports.isToBN=c,exports.mainnetTokens={AKRO:"0x8ab7404063ec4dbcfd4598215992dc3f8ec853d7",COMP:"0xc00e94cb662c3520282e6f5717214004a7f26888",CRV:"0xd533a949740bb3306d119cc777fa900ba034cd52",DAI:"0x6b175474e89094c44da98b954eedeac495271d0f",SNX:"0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f",TUSD:"0x0000000000085d4780b73119b644ae5ecd22b376",USDC:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",USDT:"0xdac17f958d2ee523a2206206994597c13d831ec7",bUSD:"0x4fabb145d64652a948d72533023f6e7a623c7c53",sUSD:"0x57ab1ec28d129707052df4df418d58a2d46d5f51","3Crv":"0x6c3F90f043a72FA612cbac8115EE7e52BDe6E490",crvSBTC:"0x075b1bb99792c9E1041bA13afEf80C91a1e70fB3",crvBUSD:"0x3B3Ac5386837Dc563660FB6a0937DFAa5924333B",crvCOMP:"0x845838DF265Dcd2c412A1Dc9e959c7d08537f8a2",yCRV:"0xdf5e0e81dff6faf3a7e52ba697820c5e32d806a8"},exports.max=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return e.reduce((function(t,n){var e=l(t),r=l(n);return e.gt(r)?t:n}),t)},exports.min=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return e.reduce((function(t,n){var e=l(t),r=l(n);return e.lt(r)?t:n}),t)},exports.normalizeAmounts=function(t,n){if(t.length<1)return[];var e=void 0!==n?n:t.map((function(t){return t.currency.decimals})).reduce((function(t,n){return n>t?n:t}));return t.map((function(t){var n=e-t.currency.decimals;return{decimals:e,original:t,value:n>=0?t.toFraction().mul(m(n)):t.toFraction().div(m(-n))}}))},exports.roundWei=function(t,e,r,o){var i=new n(t),a=Math.max(0,e-o),u=m(a);if(!a)return i;var s=i.abs().div(u).mul(u),c=i.sub(s),l="ceil"===r&&!i.eq(s)||"half-away-from-zero"===r&&c.gte(u.divn(2));return s.add(l?u:new n(0)).muln(i.isNeg()?-1:1)},exports.sumTokenAmountsByToken=function(t){var n=t.reduce((function(t,n){var e,r=(null===(e=t.get(n.currency.address))||void 0===e?void 0:e.toFraction())||0;return t.set(n.currency.address,n.add(r)),t}),new Map);return Array.from(n.values())},exports.toBaseUnit=function(t,e){var r=t,o=new n(10).pow(new n(e)),i="-"===r.substring(0,1);if(i&&(r=r.substring(1)),"."===r)throw new Error('While converting number "'+t+'" to base units, invalid value');var a=r.split(".");if(a.length>2)throw new Error('While converting number "'+t+'" to base units, too many decimal points');var u=a[0],s=a[1];if(u||(u="0"),s||(s=""),s.length>e)throw new Error('While converting number "'+t+'" to base units, too many decimal places');for(;s.length<e;)s+="0";var c=new n(u).mul(o).add(new n(s));return i&&(c=c.mul(p)),new n(c.toString(10),10)},exports.toFraction=F,exports.zeroAddress=_;
//# sourceMappingURL=primitives.cjs.production.min.js.map
